<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>[è¯‘] RxJS è¿›é˜¶æŠ€å·§: ä½¿ç”¨ RxJS Marbles æµ‹è¯•ç«äº‰æ¡ä»¶ | Rxjs</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="ç›®å½•">
    <link rel="preload" href="/assets/css/0.styles.ccac5a78.css" as="style"><link rel="preload" href="/assets/js/app.de24a261.js" as="script"><link rel="preload" href="/assets/js/2.f6e3d3ee.js" as="script"><link rel="preload" href="/assets/js/11.41a012c6.js" as="script"><link rel="prefetch" href="/assets/js/10.157238cf.js"><link rel="prefetch" href="/assets/js/12.b8086885.js"><link rel="prefetch" href="/assets/js/13.e45c7342.js"><link rel="prefetch" href="/assets/js/14.e3e54685.js"><link rel="prefetch" href="/assets/js/15.9351c89b.js"><link rel="prefetch" href="/assets/js/16.7d3aff72.js"><link rel="prefetch" href="/assets/js/17.cd3a7c14.js"><link rel="prefetch" href="/assets/js/18.7b5bc8d2.js"><link rel="prefetch" href="/assets/js/19.77700336.js"><link rel="prefetch" href="/assets/js/20.ca0fdbb6.js"><link rel="prefetch" href="/assets/js/21.d6bc78c5.js"><link rel="prefetch" href="/assets/js/22.2428074e.js"><link rel="prefetch" href="/assets/js/23.93a777ed.js"><link rel="prefetch" href="/assets/js/24.73aa7224.js"><link rel="prefetch" href="/assets/js/25.e43f6412.js"><link rel="prefetch" href="/assets/js/26.60ae3da3.js"><link rel="prefetch" href="/assets/js/27.03e00c07.js"><link rel="prefetch" href="/assets/js/28.95c8c079.js"><link rel="prefetch" href="/assets/js/29.eb8ac4a8.js"><link rel="prefetch" href="/assets/js/3.d907f710.js"><link rel="prefetch" href="/assets/js/30.5c09e00d.js"><link rel="prefetch" href="/assets/js/31.962a908d.js"><link rel="prefetch" href="/assets/js/32.c0fe7bdd.js"><link rel="prefetch" href="/assets/js/33.74f04d2b.js"><link rel="prefetch" href="/assets/js/34.20bdc3d5.js"><link rel="prefetch" href="/assets/js/35.d30ab2c2.js"><link rel="prefetch" href="/assets/js/36.d13995e1.js"><link rel="prefetch" href="/assets/js/37.08e1d965.js"><link rel="prefetch" href="/assets/js/38.fae351d3.js"><link rel="prefetch" href="/assets/js/39.a40c9688.js"><link rel="prefetch" href="/assets/js/4.fe9ea34b.js"><link rel="prefetch" href="/assets/js/40.87c8b8ee.js"><link rel="prefetch" href="/assets/js/41.242cc580.js"><link rel="prefetch" href="/assets/js/42.736834a5.js"><link rel="prefetch" href="/assets/js/43.57a7a89e.js"><link rel="prefetch" href="/assets/js/44.2c085c54.js"><link rel="prefetch" href="/assets/js/45.fcfe6221.js"><link rel="prefetch" href="/assets/js/46.31dda88a.js"><link rel="prefetch" href="/assets/js/5.7bdab572.js"><link rel="prefetch" href="/assets/js/6.af184b79.js"><link rel="prefetch" href="/assets/js/7.d5eaab60.js"><link rel="prefetch" href="/assets/js/8.b99143ac.js"><link rel="prefetch" href="/assets/js/9.55a51475.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ccac5a78.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Rxjs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/rxjs-docs/home.html" class="nav-link">
  rxjs
</a></div><div class="nav-item"><a href="/articles/home.html" class="nav-link">
  ç²¾é€‰æ–‡ç« 
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/rxjs-docs/home.html" class="nav-link">
  rxjs
</a></div><div class="nav-item"><a href="/articles/home.html" class="nav-link">
  ç²¾é€‰æ–‡ç« 
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/articles/home.html" class="sidebar-link">RxJS ä¼˜è´¨æ–‡ç« ç¿»è¯‘</a></li><li><a href="/articles/articles/ADVANCED-CACHING-WITH-RXJS.html" class="sidebar-link">[è¯‘] RxJS é«˜çº§ç¼“å­˜</a></li><li><a href="/articles/articles/Angular-Simple-Infinite-Scroller-Directive-With-RxJS-Observables.html" class="sidebar-link">[è¯‘] Angular: ä½¿ç”¨ RxJS Observables æ¥å®ç°ç®€æ˜“ç‰ˆçš„æ— é™æ»šåŠ¨åŠ è½½æŒ‡ä»¤</a></li><li><a href="/articles/articles/Debugging-RxJS-Part1-Tooling.html" class="sidebar-link">[è¯‘] è°ƒè¯• RxJS ç¬¬1éƒ¨åˆ†: å·¥å…·ç¯‡</a></li><li><a href="/articles/articles/Debugging-RxJS-Part2-Logging.html" class="sidebar-link">[è¯‘] è°ƒè¯• RxJS ç¬¬2éƒ¨åˆ†: æ—¥å¿—ç¯‡</a></li><li><a href="/articles/articles/Don't-Unsubscribe.html" class="sidebar-link">[è¯‘] RxJS: åˆ«å–æ¶ˆè®¢é˜…</a></li><li><a href="/articles/articles/Hot-Vs-Cold-Observables.html" class="sidebar-link">[è¯‘] çƒ­çš„ Vs å†·çš„ Observables</a></li><li><a href="/articles/articles/How-To-Use-RefCount.html" class="sidebar-link">[è¯‘] RxJS: å¦‚ä½•ä½¿ç”¨ refCount</a></li><li><a href="/articles/articles/Infinite-Scroll-In-Angular-An-RxJS.html" class="sidebar-link">[è¯‘] ä½¿ç”¨ Angular å’Œ RxJS å®ç°çš„æ— é™æ»šåŠ¨åŠ è½½</a></li><li><a href="/articles/articles/Learn-To-Combine-RxJS-Sequences-With-Super-Intuitive-Interactive-Diagrams.html" class="sidebar-link">[è¯‘] RxJS: ä½¿ç”¨è¶…ç›´è§‚çš„äº¤äº’å›¾æ¥å­¦ä¹ ç»„åˆæ“ä½œç¬¦</a></li><li><a href="/articles/articles/Learning-Observable-By-Building-Observable.html" class="sidebar-link">[è¯‘] é€šè¿‡æ„å»º Observable æ¥å­¦ä¹  Observable</a></li><li><a href="/articles/articles/Naive-Infinite-Scroll-In-Reactive-Programming-Using-RxJS-Observables.html" class="sidebar-link">[è¯‘] ä½¿ç”¨å“åº”å¼ç¼–ç¨‹æ¥å®ç°ç®€æ˜“ç‰ˆçš„æ— é™æ»šåŠ¨åŠ è½½</a></li><li><a href="/articles/articles/On-The-Subject-Of-Subjects.html" class="sidebar-link">[è¯‘] å…³äº RxJS ä¸­çš„ Subject</a></li><li><a href="/articles/articles/PRIMER-ON-RXJS-SCHEDULERS.html" class="sidebar-link">[è¯‘] RxJS è°ƒåº¦å™¨å…¥é—¨</a></li><li><a href="/articles/articles/Reactive-Brain-Waves.html" class="sidebar-link">[è¯‘] å“åº”å¼è„‘ç”µæ³¢</a></li><li><a href="/articles/articles/RxJS-Observable-Interop-With-Promises-And-Async-Await.html" class="sidebar-link">[è¯‘] RxJS Observable ä¸ Promises å’Œ Async-Await äº¤äº’</a></li><li><a href="/articles/articles/Six-Operators-That-You-Must-Know.html" class="sidebar-link">[è¯‘] RxJS: 6ä¸ªä½ å¿…é¡»çŸ¥é“çš„æ“ä½œç¬¦</a></li><li><a href="/articles/articles/Subjects-For-Human-Beings.html" class="sidebar-link">[è¯‘] RxJS: ç™½è¯ Subjects</a></li><li><a href="/articles/articles/TAMING-SNAKES-WITH-REACTIVE-STREAMS.html" class="sidebar-link">[è¯‘] RxJS æ¸¸æˆä¹‹è´ªåƒè›‡</a></li><li><a href="/articles/articles/Testing-Race-Conditions-Using-RxJS-Marbles.html" aria-current="page" class="active sidebar-link">[è¯‘] RxJS è¿›é˜¶æŠ€å·§: ä½¿ç”¨ RxJS Marbles æµ‹è¯•ç«äº‰æ¡ä»¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/articles/Testing-Race-Conditions-Using-RxJS-Marbles.html#é—®é¢˜" class="sidebar-link">é—®é¢˜</a></li><li class="sidebar-sub-header"><a href="/articles/articles/Testing-Race-Conditions-Using-RxJS-Marbles.html#marbles" class="sidebar-link">Marbles</a></li><li class="sidebar-sub-header"><a href="/articles/articles/Testing-Race-Conditions-Using-RxJS-Marbles.html#æµ‹è¯•ç«äº‰æ¡ä»¶" class="sidebar-link">æµ‹è¯•ç«äº‰æ¡ä»¶</a></li><li class="sidebar-sub-header"><a href="/articles/articles/Testing-Race-Conditions-Using-RxJS-Marbles.html#ä¿®å¤ç«äº‰æ¡ä»¶" class="sidebar-link">ä¿®å¤ç«äº‰æ¡ä»¶</a></li><li class="sidebar-sub-header"><a href="/articles/articles/Testing-Race-Conditions-Using-RxJS-Marbles.html#æºç " class="sidebar-link">æºç </a></li><li class="sidebar-sub-header"><a href="/articles/articles/Testing-Race-Conditions-Using-RxJS-Marbles.html#æ€»ç»“" class="sidebar-link">æ€»ç»“</a></li></ul></li><li><a href="/articles/articles/Understanding-Subjects-in-RxJS.html" class="sidebar-link">[è¯‘] ç†è§£ RxJS ä¸­ Subjects</a></li><li><a href="/articles/articles/Understanding-The-Publish-And-Share-Operators.html" class="sidebar-link">[è¯‘] RxJS: ç†è§£ publish å’Œ share æ“ä½œç¬¦</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="è¯‘-rxjs-è¿›é˜¶æŠ€å·§-ä½¿ç”¨-rxjs-marbles-æµ‹è¯•ç«äº‰æ¡ä»¶"><a href="#è¯‘-rxjs-è¿›é˜¶æŠ€å·§-ä½¿ç”¨-rxjs-marbles-æµ‹è¯•ç«äº‰æ¡ä»¶" class="header-anchor">#</a> [è¯‘] RxJS è¿›é˜¶æŠ€å·§: ä½¿ç”¨ RxJS Marbles æµ‹è¯•ç«äº‰æ¡ä»¶</h1> <blockquote><p>åŸæ–‡é“¾æ¥: <a href="https://blog.nrwl.io/rxjs-advanced-techniques-testing-race-conditions-using-rxjs-marbles-53e7e789fba5" target="_blank" rel="noopener noreferrer">https://blog.nrwl.io/rxjs-advanced-techniques-testing-race-conditions-using-rxjs-marbles-53e7e789fba5<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p align="left"><img src="/assets/img/angular-rxjs-logo.e3a5b97e.png" alt="Angular RxJS Logo" width="700"></p> <p><em>Victor Savkin æ˜¯ <a href="https://nrwl.io/" target="_blank" rel="noopener noreferrer">nrwl.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> çš„è”åˆåˆ›å§‹äººã€‚ä»–ä¹‹å‰åœ¨ Google çš„ Angular æ ¸å¿ƒå›¢é˜Ÿï¼Œå¹¶å»ºç«‹äº†ä¾èµ–æ³¨å…¥ã€å˜åŒ–æ£€æµ‹ã€è¡¨å•æ¨¡å—å’Œè·¯ç”±æ¨¡å—ã€‚</em></p> <hr> <p>æ„å»º Web åº”ç”¨æ¶‰åŠåˆ°å¤šä¸ªåç«¯ã€Web Workers å’Œ UI ç»„ä»¶ï¼Œæ‰€æœ‰çš„è¿™ä¸€åˆ‡éƒ½ä¼šå¹¶å‘åœ°æ›´æ–°åº”ç”¨çš„çŠ¶æ€ã€‚ç”±äºç«äº‰çŠ¶æ€å¾ˆå®¹æ˜“å¼•å…¥ bug ã€‚åœ¨æœ¬æ–‡ä¸­æˆ‘ä¼šå±•ç¤ºå¸¦æœ‰è¿™æ · bug çš„ç¤ºä¾‹ï¼Œå¹¶æ•™ä½ å¦‚æœåœ¨å•å…ƒæµ‹è¯•ä¸­ä½¿ç”¨ RxJS marbles æ¥æš´éœ²é—®é¢˜ï¼Œä»¥åŠæœ€åå¦‚ä½•æ¥ä¿®å¤é—®é¢˜ã€‚</p> <p><em>æˆ‘ä¼šä½¿ç”¨ Angular å’Œ RxJSï¼Œä½†æˆ‘å°†è°ˆè®ºçš„ä»»ä½•å†…å®¹çœŸçš„æ˜¯é€‚ç”¨äºä»»ä½• Web åº”ç”¨çš„ï¼Œä¸ä½¿ç”¨çš„æ¡†æ¶æ— å…³ã€‚</em></p> <h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="header-anchor">#</a> é—®é¢˜</h2> <p>æˆ‘ä»¬æ¥çœ‹ä¸‹ <code>MovieShowingsComponent</code> ã€‚å®ƒæ˜¯ä¸€ä¸ªå±•ç¤ºç”µå½±æ”¾æ˜ çš„ç®€å•ç»„ä»¶ã€‚å½“ç”¨æˆ·é€‰æ‹©ä¸€éƒ¨ç”µå½±æ—¶ï¼Œç»„ä»¶ä¼šç«‹å³æ˜¾ç¤ºå·²é€‰æ‹©çš„ç”µå½±åç§°ï¼Œç„¶åï¼Œä¸€æ—¦ä»åç«¯æ¥æ”¶åˆ°å“åº”ï¼Œä¾¿ä¼šæ˜¾ç¤ºç›¸åº”çš„ <code>showings</code> ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'movie-showings-component'</span><span class="token punctuation">,</span>
  templateUrl<span class="token operator">:</span> <span class="token string">'./movie-showings.component.html'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MovieShowingsComponent</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> movieTitle<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> showings<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> backend<span class="token operator">:</span> Backend<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token function">selectMovie</span><span class="token punctuation">(</span>movieTitle<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>movieTitle <span class="token operator">=</span> movieTitle<span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>backend<span class="token punctuation">.</span><span class="token function">getShowings</span><span class="token punctuation">(</span>movieTitle<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>showings <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>showings <span class="token operator">=</span> showings<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>è¿™ä¸ªç»„ä»¶å­˜åœ¨ç«äº‰æ¡ä»¶</strong>ã€‚ä¸ºäº†çœ‹å‡ºé—®é¢˜æ‰€åœ¨ï¼Œè®©æˆ‘ä»¬æƒ³è±¡å¦‚ä¸‹åœºæ™¯ã€‚å‡è®¾ç”¨æˆ·å…ˆé€‰æ‹©äº† â€˜After the Stormâ€™ï¼Œç„¶åå†é€‰æ‹© â€˜Patersonâ€™ ã€‚å®ƒçœ‹ä¸Šå»åº”è¯¥æ˜¯è¿™æ ·çš„:</p> <p><img src="/assets/img/normal.c7492349.png" alt="normal"></p> <p>æˆ‘ä»¬åœ¨è¿™é‡Œåšä¸€ä¸ªå‡è®¾: â€˜After the Stormâ€™ çš„å“åº”ä¼šå…ˆè¿”å›ã€‚ä½†å¦‚æœä¸æ˜¯è¿™æ ·å‘¢ï¼Ÿå¦‚æœ â€˜Patersonâ€™ çš„å“åº”å…ˆè¿”å›ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p> <p><img src="/assets/img/trouble.1fbad766.png" alt="trouble"></p> <p>åº”ç”¨å…¶å®é€‰çš„æ˜¯ â€˜Patersonâ€™ï¼Œä½†æ˜¾ç¤ºçš„æ˜¯ <code>showings</code> å´æ˜¯ â€˜After the Stormâ€™ çš„ï¼Œåº”ç”¨è¢«ç ´åäº†ã€‚</p> <p>åœ¨å¼€å§‹ä¿®å¤å®ƒä¹‹å‰ï¼Œè®©æˆ‘ä»¬æ¥ç¼–å†™å•å…ƒæµ‹è¯•æ¥æš´éœ²è¿™ç§ç«äº‰æ¡ä»¶ã€‚å½“ç„¶ï¼Œæœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥åšåˆ°è¿™ç‚¹ã€‚ä½†ç”±äºæˆ‘ä»¬ä½¿ç”¨ RxJSï¼Œæˆ‘ä»¬ä¼šç”¨ Marbles ï¼Œå®ƒæ˜¯ä¸€ç§æµ‹è¯•å¹¶å‘ä»£ç çš„å·¥å…·ï¼Œå®ƒåŠŸèƒ½å¼ºå¤§å¹¶ä¸”æ½œåŠ›åè¶³ã€‚</p> <h2 id="marbles"><a href="#marbles" class="header-anchor">#</a> Marbles</h2> <p>è¦ä½¿ç”¨ Marbleï¼Œæˆ‘ä»¬éœ€è¦å®‰è£… jasmine-marbles åº“ã€‚</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> â€” save-dev jasmine-marbles
</code></pre></div><p>åœ¨ä¸ºç»„ä»¶ç¼–å†™æµ‹è¯•ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡æµ‹è¯• <strong>concat</strong> æ“ä½œç¬¦æ¥çœ‹ä¸‹ Marble æµ‹è¯•é€šå¸¸æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>cold<span class="token punctuation">,</span> getTestScheduler<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'jasmine-marbles'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'rxjs/add/operator/concat'</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Test'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'concat'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> one$ <span class="token operator">=</span> <span class="token function">cold</span><span class="token punctuation">(</span><span class="token string">'x-x|'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> two$ <span class="token operator">=</span> <span class="token function">cold</span><span class="token punctuation">(</span><span class="token string">'-y|'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>one$<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>two$<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeObservable</span><span class="token punctuation">(</span><span class="token function">cold</span><span class="token punctuation">(</span><span class="token string">'x-x-y|'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ç”± <em>jasmine-marbles</em> æä¾›çš„ <code>cold</code> è¾…åŠ©æ–¹æ³•åˆ›å»ºäº†ä¸¤ä¸ª observables: <code>one$</code> å’Œ <code>two$</code> ã€‚(å¦‚æœä½ å¯¹çƒ­çš„å’Œå†·çš„ observables è¿˜ä¸ç†Ÿæ‚‰çš„è¯ï¼Œè¯·é˜…è¯» Ben Lesh çš„<a href="https://medium.com/@benlesh/hot-vs-cold-observables-f8094ed53339" target="_blank" rel="noopener noreferrer">è¿™ç¯‡æ–‡ç« <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)ã€‚</p> <p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ concat æ“ä½œç¬¦æ¥è·å–ç»“æœ observableï¼Œå®ƒä¼šç”¨æ¥ä¸æœŸå¾…çš„ç»“æœè¿›è¡Œæ¯”è¾ƒã€‚</p> <p><strong>Marbles æ˜¯ä¸€ç§ç”¨æ¥å®šä¹‰ RxJS observables çš„é¢†åŸŸç‰¹å®šè¯­è¨€</strong>ã€‚ä½¿ç”¨å®ƒæˆ‘ä»¬å¯ä»¥å®šä¹‰ observables ä½•æ—¶å‘å‡ºå€¼ï¼Œä½•æ—¶å®ƒä»¬æ˜¯ç©ºé—²çš„ï¼Œä½•æ—¶å®ƒä»¬æŠ¥é”™ï¼Œä½•æ—¶å®ƒä»¬è¢«è®¢é˜…ï¼Œä»¥åŠä½•æ—¶å®ƒä»¬å®Œæˆã€‚åœ¨æˆ‘ä»¬çš„æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ª observablesï¼Œå…¶ä¸­ä¸€ä¸ª (â€™x-x|â€™) å‘å‡ºä¸€ä¸ª â€˜xâ€™ï¼Œç„¶åç­‰å¾…10æ¯«ç§’å†å‘å‡ºå¦ä¸€ä¸ª â€˜xâ€™ ï¼Œç„¶åå®Œæˆã€‚è€Œå¦ä¸€ä¸ªåœ¨å‘å‡º â€˜yâ€™ å‰ä¼šç­‰å¾…10æ¯«ç§’ã€‚</p> <p>é€šå¸¸å‘å‡ºå•ä¸ªå­—æ¯çš„å­—ç¬¦ä¸²æ˜¯ä¸å¤Ÿçš„ã€‚<code>cold</code> è¾…åŠ©å‡½æ•°æä¾›äº†ä¸€ç§æ–¹å¼ä»¥å°†å…¶æ˜ å°„æˆå…¶ä»–çš„å¯¹è±¡ï¼Œåƒè¿™æ ·:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>cold<span class="token punctuation">,</span> getTestScheduler<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'jasmine-marbles'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'rxjs/add/operator/concat'</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Test'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'concat'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> one$ <span class="token operator">=</span> <span class="token function">cold</span><span class="token punctuation">(</span><span class="token string">'x-x|'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token string">'some value'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> two$ <span class="token operator">=</span> <span class="token function">cold</span><span class="token punctuation">(</span><span class="token string">'-y|'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>y<span class="token operator">:</span> <span class="token number">999</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>one$<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>two$<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeObservable</span><span class="token punctuation">(</span><span class="token function">cold</span><span class="token punctuation">(</span><span class="token string">'a-a-b|'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token string">'some value'</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token number">999</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>ä¸è®¸å¤š DSL ä¸€æ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨ Marbles æ¥æå‡æˆ‘ä»¬æµ‹è¯•ä»£ç çš„å¯è¯»æ€§ã€‚Marbles åœ¨æ­¤æ–¹é¢åšçš„éå¸¸æ£’ï¼Œæˆ‘ä»¬åªè¦ç¨ç¨çœ‹ä¸€çœ¼æµ‹è¯•ä»£ç ä¾¿èƒ½æ˜ç™½æµ‹è¯•ä»£ç åœ¨åšä»€ä¹ˆã€‚</strong></p> <p>å¦‚æœä½ æƒ³äº†è§£æœ‰å…³ Marbles æµ‹è¯•çš„æ›´å¤šå†…å®¹ï¼Œè¯·è§‚çœ‹<a href="https://egghead.io/lessons/rxjs-introduction-to-rxjs-marble-testing" target="_blank" rel="noopener noreferrer">è¿™ä¸ªè§†é¢‘<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚</p> <h2 id="æµ‹è¯•ç«äº‰æ¡ä»¶"><a href="#æµ‹è¯•ç«äº‰æ¡ä»¶" class="header-anchor">#</a> æµ‹è¯•ç«äº‰æ¡ä»¶</h2> <p>æœ‰äº†è¿™ä¸ªå¼ºåŠ›å·¥å…·ï¼Œæˆ‘ä»¬æ¥ç¼–å†™å•å…ƒæµ‹è¯•ä»¥æš´éœ²å‡ºç«äº‰æ¡ä»¶ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MovieShowingsComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./movie-showings.component'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> cold<span class="token punctuation">,</span> getTestScheduler <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'jasmine-marbles'</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'MovieShowingsComponent'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should not have a race condition'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> backend <span class="token operator">=</span> jasmine<span class="token punctuation">.</span><span class="token function">createSpyObj</span><span class="token punctuation">(</span><span class="token string">'backend'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'getShowings'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> cmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MovieShowingsComponent</span><span class="token punctuation">(</span>backend<span class="token punctuation">)</span><span class="token punctuation">;</span>

    backend<span class="token punctuation">.</span>getShowings<span class="token punctuation">.</span>and<span class="token punctuation">.</span><span class="token function">returnValue</span><span class="token punctuation">(</span><span class="token function">cold</span><span class="token punctuation">(</span><span class="token string">'--x|'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'10am'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cmp<span class="token punctuation">.</span><span class="token function">selectMovie</span><span class="token punctuation">(</span><span class="token string">'After the Storm'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    backend<span class="token punctuation">.</span>getShowings<span class="token punctuation">.</span>and<span class="token punctuation">.</span><span class="token function">returnValue</span><span class="token punctuation">(</span><span class="token function">cold</span><span class="token punctuation">(</span><span class="token string">'-y|'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>y<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'11am'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cmp<span class="token punctuation">.</span><span class="token function">selectMovie</span><span class="token punctuation">(</span><span class="token string">'Paterson'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// è¿™ä¼šæ¸…é™¤æ‰€æœ‰çš„ observables</span>
    <span class="token function">getTestScheduler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>cmp<span class="token punctuation">.</span>movieTitle<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">'Paterson'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>cmp<span class="token punctuation">.</span>showings<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'11am'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿™ä¼šå¤±è´¥ï¼Œå› ä¸º showings æ˜¯ ['10am'] ã€‚</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ä¿®å¤ç«äº‰æ¡ä»¶"><a href="#ä¿®å¤ç«äº‰æ¡ä»¶" class="header-anchor">#</a> ä¿®å¤ç«äº‰æ¡ä»¶</h2> <p>æˆ‘ä»¬å†æ¥çœ‹ä¸‹æˆ‘ä»¬çš„ç»„ä»¶ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'movie-showings-component'</span><span class="token punctuation">,</span>
  templateUrl<span class="token operator">:</span> <span class="token string">'./movie-showings.component.html'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MovieShowingsComponent</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> movieTitle<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> showings<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> backend<span class="token operator">:</span> Backend<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token function">selectMovie</span><span class="token punctuation">(</span>movieTitle<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>movieTitle <span class="token operator">=</span> movieTitle<span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>backend<span class="token punctuation">.</span><span class="token function">getShowings</span><span class="token punctuation">(</span>movieTitle<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>showings <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>showings <span class="token operator">=</span> showings<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ¯æ¬¡ç”¨æˆ·é€‰æ‹©ä¸€ä¸ªç”µå½±ï¼Œæˆ‘ä»¬éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„å­¤ç«‹çš„ observable ã€‚å¦‚æœç”¨æˆ·ç‚¹å‡»ä¸¤æ¬¡ï¼Œæˆ‘ä»¬å°±æœ‰ä¸¤ä¸ª observablesï¼Œå®ƒä»¬ä¹‹é—´æ— æ³•åè°ƒã€‚è¿™æ‰æ˜¯é—®é¢˜çš„æ ¹æºã€‚</p> <p>è®©æˆ‘ä»¬é€šè¿‡å¼•å…¥ä¸€ä¸ªæ‰€æœ‰ <code>getShowings</code> è°ƒç”¨çš„ observable æ¥æ”¹å˜ç°çŠ¶ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'movie-showings-cmp'</span><span class="token punctuation">,</span>
  templateUrl<span class="token operator">:</span> <span class="token string">'./movie-showings.component.html'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MovieShowingsComponent</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> movieTitle<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> showings<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">private</span> getShowings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subject<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> backend<span class="token operator">:</span> Backend<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token function">showShowings</span><span class="token punctuation">(</span>movieTitle<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>movieTitle <span class="token operator">=</span> movieTitle<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>getShowings<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>movieTitle<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°† observable æ˜ å°„æˆ showings åˆ—è¡¨ã€‚</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'movie-showings-cmp'</span><span class="token punctuation">,</span>
  templateUrl<span class="token operator">:</span> <span class="token string">'./movie-showings.component.html'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MovieShowingsComponent</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> movieTitle<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> showings<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">private</span> getShowings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subject<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> backend<span class="token operator">:</span> Backend<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>getShowings<span class="token punctuation">.</span><span class="token function">switchMap</span><span class="token punctuation">(</span>movieTitle <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>backend<span class="token punctuation">.</span><span class="token function">getShowings</span><span class="token punctuation">(</span>movieTitle<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>showings <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>showings <span class="token operator">=</span> showings<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">showShowings</span><span class="token punctuation">(</span>movieTitle<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>movieTitle <span class="token operator">=</span> movieTitle<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>getShowings<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>movieTitle<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>é€šè¿‡è¿™æ ·ï¼Œæˆ‘ä»¬ç”¨å•ä¸ªçš„é«˜é˜¶ observable æ¥æ›¿ä»£ä¸€ç»„å­¤ç«‹çš„ observables çš„é›†åˆï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å®ƒåº”ç”¨åŒæ­¥æ€§çš„æ“ä½œç¬¦</strong>ã€‚åŒæ­¥æ€§çš„æ“ä½œç¬¦æŒ‡çš„å°±æ˜¯ <strong>switchMap</strong> ã€‚</p> <p><code>switchMap</code> æ“ä½œç¬¦åªä¼šè®¢é˜… <code>backend.getShowings</code> çš„æœ€æ–°è°ƒç”¨ã€‚å¦‚æœæ‰§è¡Œäº†å¦ä¸€ä¸ªè°ƒç”¨ï¼Œå®ƒä¼šå–æ¶ˆå¯¹å‰ä¸€ä¸ªè°ƒç”¨çš„è®¢é˜…ã€‚</p> <p><img src="/assets/img/solved.631e1914.png" alt="solved"></p> <p>éšç€è¿™æ¬¡å˜åŒ–ï¼Œæˆ‘ä»¬çš„æµ‹è¯•å°†ä¼šé€šè¿‡ã€‚</p> <h2 id="æºç "><a href="#æºç " class="header-anchor">#</a> æºç </h2> <p>ä½ å¯ä»¥åœ¨<a href="https://github.com/vsavkin/marble_testing_and_race_conditions" target="_blank" rel="noopener noreferrer">è¿™ä¸ªä»“åº“<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>æ‰¾åˆ°æºç ã€‚æ³¨æ„ <code>tsconfig.spec.json</code> æ–‡ä»¶ä¸­çš„ &quot;skipLibCheck&quot;: true ã€‚</p> <h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="header-anchor">#</a> æ€»ç»“</h2> <p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬çœ‹è¿‡äº†ä¸€ä¸ªç”±ç«äº‰æ¡ä»¶å¼•èµ·çš„ bug ç¤ºä¾‹ã€‚æˆ‘ä»¬ä½¿ç”¨äº† Marblesï¼Œ è¿™æ˜¯ä¸€ç§æµ‹è¯•å¼‚æ­¥ä»£ç çš„å¼ºå¤§æ–¹æ³•ï¼Œä»¥æš´éœ²å•å…ƒæµ‹è¯•ä¸­çš„ bug ã€‚ç„¶åæˆ‘ä»¬é€šè¿‡ä½¿ç”¨å•ä¸ªçš„é«˜é˜¶ observable (åº”ç”¨äº† switchMap æ“ä½œç¬¦) æ¥é‡æ„ä»£ç ä»¥ä¿®å¤è¿™ä¸ª bug ã€‚</p> <p><strong>Victor Savkin æ˜¯ <a href="https://nrwl.io/" target="_blank" rel="noopener noreferrer">Nrwlâ€Šâ€”â€Šä¼ä¸šçº§ Angular å’¨è¯¢å…¬å¸<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> çš„è”åˆåˆ›å§‹äºº</strong>ã€‚</p> <p><img src="/assets/img/nrwl-logo.b3bea1ef.png" alt="Nrwl Logo"></p> <p><em>å¦‚æœä½ å–œæ¬¢çš„è¯ï¼Œè¯·ç‚¹å‡»ä¸‹é¢çš„ğŸ’šï¼Œè¿™æ ·å…¶ä»–äººä¹Ÿä¼šåœ¨ Medium çœ‹åˆ°æ­¤ç¯‡æ–‡ç« ã€‚å…³æ³¨ <a href="http://twitter.com/victorsavkin" target="_blank" rel="noopener noreferrer">@victorsavkin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ä»¥é˜…è¯»æ›´å¤šå…³äº Angular çš„å†…å®¹ã€‚</em></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/articles/articles/TAMING-SNAKES-WITH-REACTIVE-STREAMS.html" class="prev">
        [è¯‘] RxJS æ¸¸æˆä¹‹è´ªåƒè›‡
      </a></span> <span class="next"><a href="/articles/articles/Understanding-Subjects-in-RxJS.html">
        [è¯‘] ç†è§£ RxJS ä¸­ Subjects
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.de24a261.js" defer></script><script src="/assets/js/2.f6e3d3ee.js" defer></script><script src="/assets/js/11.41a012c6.js" defer></script>
  </body>
</html>
